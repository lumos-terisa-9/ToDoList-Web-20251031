definitions:
  handlers.CancelActivityRequest:
    properties:
      reason:
        example: 因天气原因取消
        maxLength: 500
        minLength: 1
        type: string
    required:
    - reason
    type: object
  handlers.CancelCompletedTodoRequest:
    properties:
      description:
        example: 项目进度讨论
        type: string
      end_time:
        example: "2024-01-15T15:00:00Z"
        type: string
      start_time:
        example: "2024-01-15T14:00:00Z"
        type: string
      title:
        example: 团队会议
        type: string
    required:
    - description
    - end_time
    - start_time
    - title
    type: object
  handlers.CancelCompletedTodoResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.CancelTodoAndChildrenRequest:
    properties:
      createdAt:
        type: string
      description:
        example: 项目进度讨论
        type: string
      title:
        example: 每周团队会议
        type: string
    required:
    - title
    type: object
  handlers.CancelTodoRequest:
    properties:
      description:
        example: 项目进度讨论
        type: string
      end_time:
        example: "2024-01-15T15:00:00Z"
        type: string
      start_time:
        example: "2024-01-15T14:00:00Z"
        type: string
      title:
        example: 团队会议
        type: string
    required:
    - end_time
    - start_time
    - title
    type: object
  handlers.CancelTodoResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.CompleteTodoRequest:
    properties:
      description:
        example: 项目进度讨论
        type: string
      end_time:
        example: "2024-01-15T15:00:00Z"
        type: string
      start_time:
        example: "2024-01-15T14:00:00Z"
        type: string
      title:
        example: 团队会议
        type: string
    required:
    - description
    - end_time
    - start_time
    - title
    type: object
  handlers.CompleteTodoResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.CompletedTodoResponse:
    properties:
      count:
        type: integer
      date:
        type: string
      message:
        type: string
      success:
        type: boolean
      todos:
        items:
          $ref: '#/definitions/models.Todo'
        type: array
    type: object
  handlers.CreateInviteCodeRequest:
    properties:
      code:
        type: string
    required:
    - code
    type: object
  handlers.CreateOrganizationApplicationRequest:
    properties:
      applicant_introduction:
        type: string
      application_reason:
        minLength: 1
        type: string
      attachment_url:
        type: string
      organization_name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - application_reason
    - organization_name
    type: object
  handlers.ErrorResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.JoinOrganizationApplicationRequest:
    properties:
      applicant_introduction:
        type: string
      application_reason:
        minLength: 1
        type: string
      attachment_url:
        type: string
      organization_name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - application_reason
    - organization_name
    type: object
  handlers.JoinWithCodeRequest:
    properties:
      code:
        type: string
      organization_id:
        minimum: 1
        type: integer
    required:
    - code
    - organization_id
    type: object
  handlers.ProcessApplicationRequest:
    properties:
      action:
        enum:
        - approve
        - reject
        example: approve
        type: string
      remark:
        example: 申请符合要求
        type: string
    required:
    - action
    type: object
  handlers.RemoveOrganizationMemberRequest:
    properties:
      org_id:
        example: 1
        type: integer
      user_id:
        example: 2
        type: integer
    required:
    - org_id
    - user_id
    type: object
  handlers.RenewTodoResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.SendVerificationCodeRequest:
    properties:
      business:
        description: '业务类型: register, reset_password, change_email, join_org'
        type: string
      email:
        description: 邮箱地址
        type: string
    required:
    - business
    - email
    type: object
  handlers.SubmitChangeOrgAppRequest:
    properties:
      applicant_introduction:
        type: string
      application_reason:
        minLength: 1
        type: string
      attachment_url:
        type: string
      organization_id:
        minimum: 1
        type: integer
      organization_name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - application_reason
    - organization_id
    - organization_name
    type: object
  handlers.SuccessResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.TodoListResponse:
    properties:
      count:
        type: integer
      message:
        type: string
      success:
        type: boolean
      todos:
        items:
          $ref: '#/definitions/models.Todo'
        type: array
    type: object
  handlers.TransferOrganizationOwnershipRequest:
    properties:
      new_creator_id:
        example: 123
        minimum: 1
        type: integer
    required:
    - new_creator_id
    type: object
  handlers.UpdateOrganizationDescriptionRequest:
    properties:
      new_description:
        example: 这是更新后的组织描述
        maxLength: 500
        type: string
    required:
    - new_description
    type: object
  handlers.UpdateOrganizationLocationRequest:
    properties:
      latitude:
        maximum: 90
        minimum: -90
        type: number
      longitude:
        maximum: 180
        minimum: -180
        type: number
    required:
    - latitude
    - longitude
    type: object
  handlers.UpdateOrganizationLogoRequest:
    properties:
      new_logo_url:
        example: https://example.com/logo.png
        maxLength: 255
        type: string
    required:
    - new_logo_url
    type: object
  handlers.UpdateOrganizationNameRequest:
    properties:
      new_name:
        example: 新技术研发部
        maxLength: 100
        minLength: 1
        type: string
    required:
    - new_name
    type: object
  handlers.VerifyCodeRequest:
    properties:
      business:
        description: 业务类型
        type: string
      code:
        description: 6位验证码
        type: string
      email:
        description: 邮箱地址
        type: string
    required:
    - business
    - code
    - email
    type: object
  models.Todo:
    properties:
      category:
        type: string
      completed_at:
        type: string
      created_at:
        type: string
      creator_organ_id:
        type: integer
      creator_user_id:
        type: integer
      description:
        type: string
      end_time:
        type: string
      has_children:
        type: boolean
      id:
        type: integer
      parent_id:
        description: 父子关系
        type: integer
      repeat_end_date:
        type: string
      repeat_interval:
        type: integer
      repeat_type:
        description: 重复规则
        type: string
      start_time:
        type: string
      status:
        type: string
      title:
        type: string
      urgency:
        type: string
    type: object
  services.CreateActivityRequest:
    properties:
      description:
        type: string
      end_time:
        type: string
      participation_limit:
        enum:
        - public
        - org_only
        - admin_assign
        type: string
      start_time:
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - end_time
    - start_time
    - title
    type: object
  services.CreateTodoRequest:
    properties:
      category:
        default: personal
        enum:
        - work
        - study
        - fun
        - personal
        type: string
      child_dates:
        description: 子待办日期数组
        items:
          type: string
        type: array
      description:
        type: string
      end_time:
        type: string
      repeat_end_date:
        type: string
      repeat_interval:
        default: 1
        type: integer
      repeat_type:
        default: none
        description: 重复规则
        enum:
        - none
        - daily
        - weekly
        - monthly
        type: string
      start_time:
        type: string
      title:
        type: string
      urgency:
        default: medium
        enum:
        - low
        - medium
        - high
        type: string
    required:
    - end_time
    - start_time
    - title
    type: object
  services.CreateTodoResponse:
    properties:
      created_at:
        type: string
      message:
        type: string
      success:
        type: boolean
    type: object
  services.LogoutResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  services.UpdateActivityRequest:
    properties:
      description:
        example: 更新后的活动描述
        type: string
      end_time:
        example: "2024-01-20T17:00:00Z"
        type: string
      participation_limit:
        enum:
        - public
        - org_only
        - admin_assign
        example: public
        type: string
      start_time:
        example: "2024-01-20T09:00:00Z"
        type: string
      title:
        example: 更新后的活动标题
        maxLength: 200
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: 团队任务管理平台API
  title: Team Task Hub API
  version: "1.0"
paths:
  /admin/api/organization/{orgID}/description:
    patch:
      consumes:
      - application/json
      description: '管理员手动更新指定组织的描述信息，example({"new_description": "这是更新后的组织描述"})'
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateOrganizationDescriptionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新组织描述
      tags:
      - 系统管理
  /admin/api/organization/{orgID}/logo:
    patch:
      consumes:
      - application/json
      description: '管理员手动更新指定组织的Logo图片URL，example({"new_logo_url": "https://example.com/logo.png"})'
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateOrganizationLogoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新组织Logo
      tags:
      - 系统管理
  /admin/api/organization/{orgID}/name:
    patch:
      consumes:
      - application/json
      description: '管理员手动更新指定组织的名称信息，example({"new_name": "新技术研发部"})'
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateOrganizationNameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新组织名称
      tags:
      - 系统管理
  /admin/api/organization/application/pending:
    get:
      consumes:
      - application/json
      description: 管理员获取待处理申请，可通过type参数过滤
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: '申请类型: create_org（创建组织）,change_org（修改组织）,join_org（加入组织）'
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
      security:
      - BearerAuth: []
      summary: 获取待处理申请列表
      tags:
      - 系统管理
  /api/admin/email/cleanup:
    post:
      description: 清理数据库中已过期的验证码记录（定时任务调用）
      produces:
      - application/json
      responses:
        "200":
          description: 清理完成
          schema:
            type: string
        "500":
          description: 清理失败
          schema:
            type: string
      summary: 清理过期验证码
      tags:
      - 系统管理
  /api/admin/email/stats:
    get:
      description: 获取邮箱验证码发送统计信息
      produces:
      - application/json
      responses:
        "200":
          description: 统计信息
          schema:
            type: string
      summary: 获取邮箱服务统计
      tags:
      - 系统管理
  /api/admin/email/test-connection:
    get:
      description: 测试邮箱SMTP服务器连接状态（仅用于调试）
      produces:
      - application/json
      responses:
        "200":
          description: SMTP连接正常
          schema:
            type: string
        "500":
          description: SMTP连接失败
          schema:
            type: string
      summary: 测试SMTP连接
      tags:
      - 系统管理
  /api/application/change-organization:
    post:
      consumes:
      - application/json
      description: 用户提交组织信息变更申请，需要管理员审批
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 变更申请请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.SubmitChangeOrgAppRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 申请提交成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交组织变更申请
      tags:
      - 组织申请
  /api/auth/change_avatar:
    put:
      consumes:
      - application/json
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 更新头像参数
        example: '{"avatar_url": "https://example.com/new-avatar.jpg"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: '更新成功" example({"success": true, "message": "头像更新成功"})'
          schema:
            type: string
        "400":
          description: '参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 更新用户头像
      tags:
      - 认证
  /api/auth/change_email:
    put:
      consumes:
      - application/json
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 更新邮箱参数
        example: '{"new_email": "new@example.com", "old_email_code": "123456", "new_email_code":
          "654321"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: '更新成功" example({"success": true, "message": "邮箱更新成功"})'
          schema:
            type: string
        "400":
          description: '参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
        "409":
          description: '邮箱冲突" example({"success": false, "message": "邮箱已被使用"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 更新用户邮箱
      tags:
      - 认证
  /api/auth/change_password:
    put:
      consumes:
      - application/json
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 更新密码参数
        example: '{"email": "user@example.com", "code": "123456", "new_password":
          "newpassword123"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: '更新成功" example({"success": true, "message": "密码更新成功"})'
          schema:
            type: string
        "400":
          description: '参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 更新用户密码
      tags:
      - 认证
  /api/auth/change_userName:
    put:
      consumes:
      - application/json
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 更新用户名参数
        example: '{"username": "新用户名"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: '更新成功" example({"success": true, "message": "用户名更新成功"})'
          schema:
            type: string
        "400":
          description: '参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
        "409":
          description: '用户名冲突" example({"success": false, "message": "用户名已被占用"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 更新用户名
      tags:
      - 认证
  /api/auth/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: 登录参数
        example: '{"identifier":"1001","password":"password123"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功
          schema:
            type: string
        "400":
          description: 参数错误
          schema:
            type: string
        "401":
          description: 认证失败
          schema:
            type: string
      summary: 用户登录
      tags:
      - 认证
  /api/auth/logout:
    post:
      consumes:
      - application/json
      description: '用户登出，使当前令牌失效。令牌需置于Header中：Authorization: Bearer <token>（bearer和token中间有空格）'
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/services.LogoutResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: 用户登出
      tags:
      - 认证
  /api/auth/me:
    get:
      consumes:
      - application/json
      description: '获取当前已认证登录用户的详细信息，需要有效的JWT令牌。令牌需置于Header中：Authorization: Bearer
        <token>'
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '获取成功" example({"success": true, "message": "获取用户信息成功", "data":
            {"id": 1001, "username": "张三", "email": "user@example.com", "avatar_url":
            "https://example.com/avatar.jpg"}})'
          schema:
            type: string
        "400":
          description: 请求参数错误或用户标识缺失
          schema:
            type: string
        "401":
          description: 未提供有效的认证令牌
          schema:
            type: string
        "404":
          description: 用户不存在
          schema:
            type: string
        "500":
          description: 服务器内部错误或用户标识格式错误
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取当前用户个人信息
      tags:
      - 认证
  /api/auth/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: 注册参数
        example: '{"id":1001,"username":"张三","email":"user@example.com","password":"password123","code":"123456"}'
        in: body
        name: request
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "201":
          description: 注册成功
          schema:
            type: string
        "400":
          description: 参数错误
          schema:
            type: string
        "409":
          description: 用户已存在
          schema:
            type: string
      summary: 用户注册
      tags:
      - 认证
  /api/email/send-verification:
    post:
      consumes:
      - application/json
      description: 向指定邮箱发送6位数字验证码，支持多种业务场景，"register","change_email_old","change_email_new","change_password"
      parameters:
      - description: 发送验证码请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.SendVerificationCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 验证码发送成功
          schema:
            type: string
        "400":
          description: 请求参数错误
          schema:
            type: string
        "429":
          description: 请求过于频繁
          schema:
            type: string
        "500":
          description: 服务器内部错误
          schema:
            type: string
      summary: 发送邮箱验证码
      tags:
      - 邮箱验证
  /api/email/verify:
    post:
      consumes:
      - application/json
      description: 验证邮箱和验证码是否匹配且有效，支持多种业务场景
      parameters:
      - description: 验证验证码请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.VerifyCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 验证码验证成功
          schema:
            type: string
        "400":
          description: 验证码无效或已过期
          schema:
            type: string
        "500":
          description: 服务器内部错误
          schema:
            type: string
      summary: 验证邮箱验证码
      tags:
      - 邮箱验证
  /api/organization/{orgID}:
    get:
      consumes:
      - application/json
      description: 根据组织ID获取组织的完整详细信息。该接口集成了缓存，高频请求将直接返回缓存结果。
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '获取成功" example({"success": true, "message": "获取组织成功", "data":
            {"id": 1, "name": "技术部"}})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "无效的组织ID"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: 组织不存在
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询组织失败: 组织不存在"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取组织详情
      tags:
      - 组织查询
  /api/organization/{orgID}/activities:
    post:
      consumes:
      - application/json
      description: 在指定组织下创建新的活动
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 创建活动请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.CreateActivityRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
      security:
      - BearerAuth: []
      summary: 创建组织活动
      tags:
      - 活动管理
  /api/organization/{orgID}/activities/{activityID}:
    patch:
      consumes:
      - application/json
      description: 更新指定活动的详细信息，支持部分更新（只更新提供的字段）
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 活动ID
        in: path
        name: activityID
        required: true
        type: integer
      - description: 更新活动请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.UpdateActivityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新活动信息
      tags:
      - 活动管理
  /api/organization/{orgID}/activities/{activityID}/cancel:
    patch:
      consumes:
      - application/json
      description: 将指定组织的活动状态标记为已取消，并记录取消原因
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 活动ID
        in: path
        name: activityID
        required: true
        type: integer
      - description: 取消活动请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CancelActivityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 取消成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消组织活动
      tags:
      - 活动管理
  /api/organization/{orgID}/activities/assigned:
    get:
      consumes:
      - application/json
      description: 获取指定组织下未结束、未取消的仅由管理员指派参与的活动列表，需要组织管理员权限
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "403":
          description: 非管理员，无权访问
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取组织的指派活动列表
      tags:
      - 活动管理
  /api/organization/{orgID}/activities/internal:
    get:
      consumes:
      - application/json
      description: 获取指定组织下未结束、未取消的仅组织成员可参与的活动列表，必须是组织成员才能访问
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "403":
          description: 非组织成员，无权访问
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取组织的内部活动列表
      tags:
      - 活动查询
  /api/organization/{orgID}/activities/public:
    get:
      consumes:
      - application/json
      description: 获取指定组织下未结束、未取消的公开活动列表，任何已登录用户可访问
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取组织的公开活动列表
      tags:
      - 活动查询
  /api/organization/{orgID}/admin/{userID}:
    delete:
      consumes:
      - application/json
      description: 组织创建者将指定管理员降级为普通组织成员
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 要取消管理员权限的用户ID
        in: path
        name: userID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 取消管理员权限成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "403":
          description: 权限不足（非组织创建者操作）
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: 组织或用户不存在
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消管理员权限
      tags:
      - 组织管理
    patch:
      consumes:
      - application/json
      description: 组织创建者将指定普通成员提拔为组织管理员
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 要提拔的用户ID
        in: path
        name: userID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 提拔成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "403":
          description: 权限不足（非组织创建者操作）
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: 组织或用户不存在
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提拔组织成员为管理员
      tags:
      - 组织管理
  /api/organization/{orgID}/invite-codes:
    post:
      consumes:
      - application/json
      description: 管理员为指定组织创建自定义6位数字邀请码，有效期为3分钟
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 邀请码创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateInviteCodeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建组织邀请码
      tags:
      - 组织管理
  /api/organization/{orgID}/location:
    put:
      consumes:
      - application/json
      description: 根据经纬度为组织生成8位精度的Geohash编码
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 位置更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateOrganizationLocationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: 组织不存在
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新组织地理位置
      tags:
      - 组织管理
  /api/organization/{orgID}/ownership:
    patch:
      consumes:
      - application/json
      description: 组织者将指定组织的所有权转移给其他成员，无需管理员审批
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: id
        required: true
        type: integer
      - description: 转移请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.TransferOrganizationOwnershipRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 转移成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 转移组织所有权
      tags:
      - 组织管理
  /api/organization/activities/{activityID}/participants:
    get:
      consumes:
      - application/json
      description: 根据活动ID，获取参与该活动的用户基本信息（包括姓名、账号、头像）
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 活动ID
        in: path
        name: activityID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取活动的参与者基本信息列表
      tags:
      - 活动管理
  /api/organization/activities/{activityID}/participate:
    post:
      consumes:
      - application/json
      description: 用户参加指定活动，系统会检查是否重复参加，也就是领取待办的意思
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织ID
        in: path
        name: orgID
        required: true
        type: integer
      - description: 活动ID
        in: path
        name: activityID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "201":
          description: 参加成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误或用户已参加
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: 活动不存在
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 用户参加活动/领取活动
      tags:
      - 活动参与
  /api/organization/application/{id}:
    delete:
      consumes:
      - application/json
      description: 用户删除自己提交的申请
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 申请ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '删除成功" example({"success": true, "message": "申请删除成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "申请ID无效"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "删除申请失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除用户申请
      tags:
      - 组织申请
  /api/organization/application/{id}/process:
    patch:
      consumes:
      - application/json
      description: 系统/组织管理员审批或拒绝组织创建/加入申请
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 申请ID
        in: path
        name: id
        required: true
        type: integer
      - description: 处理请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.ProcessApplicationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '处理成功" example({"success": true, "message": "申请处理成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "申请不存在"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "处理申请失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 处理组织申请
      tags:
      - 组织申请
  /api/organization/application/create-organization:
    post:
      consumes:
      - application/json
      description: 用户提交创建新组织的申请，需要管理员审批
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 创建组织申请请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateOrganizationApplicationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '申请提交成功" example({"success": true, "message": "创建组织申请提交成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "组织名称已存在"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "提交申请失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交创建组织申请
      tags:
      - 组织申请
  /api/organization/application/join-organization:
    post:
      consumes:
      - application/json
      description: 用户提交加入现有组织的申请，需要组织管理员审批
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 加入组织申请请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.JoinOrganizationApplicationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '申请提交成功" example({"success": true, "message": "加入组织申请提交成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "目标组织不存在"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "提交申请失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交加入组织申请
      tags:
      - 组织申请
  /api/organization/join-with-code:
    post:
      consumes:
      - application/json
      description: 用户通过提交有效的邀请码直接加入指定组织（免审核）
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 加入请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.JoinWithCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 加入成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误或邀请码无效
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "409":
          description: 用户已是组织成员
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 使用邀请码加入组织
      tags:
      - 加入组织
  /api/organization/my-organizations:
    get:
      consumes:
      - application/json
      description: 获取用户加入的所有组织信息，包括组织基本信息和加入时间
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '获取成功" example({"success": true, "message": "获取组织列表成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "获取组织列表失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户组织总览
      tags:
      - 组织管理
  /api/organization/nearby:
    get:
      consumes:
      - application/json
      description: 根据用户经纬度生成Geohash前缀，查询约50米范围内的附近组织
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 纬度
        in: query
        maximum: 90
        minimum: -90
        name: lat
        required: true
        type: number
      - description: 经度
        in: query
        maximum: 180
        minimum: -180
        name: lng
        required: true
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: 系统内部错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询附近组织
      tags:
      - 组织查询
  /api/organization/remove-member:
    delete:
      consumes:
      - application/json
      description: 组织管理员或创建者从组织中移除成员
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 移除请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.RemoveOrganizationMemberRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '移除成功" example({"success": true, "message": "成员移除成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "成员关系不存在"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "移除成员失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 移除组织成员
      tags:
      - 组织管理
  /api/organization/search:
    get:
      consumes:
      - application/json
      description: 根据组织名称进行模糊搜索，返回匹配的组织简略信息列表
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '搜索成功" example({"success": true, "message": "搜索成功", "data":
            [{"id": 1, "name": "软工羽队"}]})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "搜索关键词不能为空"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "搜索失败: 数据库连接错误"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 搜索组织
      tags:
      - 组织查询
  /api/orgnization/application/my-applications:
    get:
      consumes:
      - application/json
      description: 获取用户提交的所有组织相关申请
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '获取成功" example({"success": true, "message": "获取申请列表成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "获取申请列表失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户的申请列表
      tags:
      - 组织申请
  /api/orgnization/application/pending-join:
    get:
      consumes:
      - application/json
      description: 组织管理员获取该组织的待处理加入申请
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 组织名称
        in: query
        name: orgName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '获取成功" example({"success": true, "message": "获取加入申请成功"})'
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: 用户未认证
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: '系统内部错误" example({"success": false, "message": "获取申请失败"})'
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取组织的待处理加入申请
      tags:
      - 组织申请
  /api/todos/Get-OneDayTodos:
    get:
      description: 查询在指定日期开始的所有未完成待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 查询日期
        example: '"2024-01-15"'
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "date":
            "2024-01-15", "todos": [...], "count": 5})'
          schema:
            $ref: '#/definitions/handlers.TodoListResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "日期参数不能为空"})'
          schema:
            type: string
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询待办失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取某一天开始的待办事项
      tags:
      - 待办查询
  /api/todos/cancel:
    post:
      consumes:
      - application/json
      description: 根据待办的具体信息将其状态改为已取消
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 取消待办请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CancelTodoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '取消成功" example({"success": true, "message": "待办已成功取消"})'
          schema:
            $ref: '#/definitions/handlers.CancelTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "取消待办失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 取消待办事项
      tags:
      - 待办事项
  /api/todos/cancel-completedTodo:
    post:
      consumes:
      - application/json
      description: 将已完成的待办事项状态改为未完成
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 取消完成请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CancelCompletedTodoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '取消成功" example({"success": true, "message": "待办已成功取消完成状态"})'
          schema:
            $ref: '#/definitions/handlers.CancelCompletedTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "标题不能为空"})'
          schema:
            type: string
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "无法取消完成状态: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 取消已完成待办事项
      tags:
      - 待办事项
  /api/todos/cancel-with-children:
    post:
      consumes:
      - application/json
      description: 根据待办标题和描述取消父待办及其所有子待办（使用事务确保一致性）
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 取消待办请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CancelTodoAndChildrenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '取消成功" example({"success": true, "message": "待办及其子待办已成功取消"})'
          schema:
            $ref: '#/definitions/handlers.CancelTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "请求参数格式错误"})'
          schema:
            type: string
        "404":
          description: '未找到待办" example({"success": false, "message": "未找到匹配的待办事项"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "取消操作失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 取消待办及其所有子待办
      tags:
      - 待办事项
  /api/todos/coming-endTodos:
    get:
      description: 查询在未来七天内会结束的所有待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "todos":
            [...], "count": 3})'
          schema:
            $ref: '#/definitions/handlers.TodoListResponse'
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询未来七天结束的待办失败:
            数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取未来七天会结束的待办事项
      tags:
      - 待办查询
  /api/todos/coming-startTodos:
    get:
      description: 查询在未来七天内会开始的所有待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "todos":
            [...], "count": 5})'
          schema:
            $ref: '#/definitions/handlers.TodoListResponse'
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询未来七天开始的待办失败:
            数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取未来七天会开始的待办事项
      tags:
      - 待办查询
  /api/todos/complete:
    post:
      consumes:
      - application/json
      description: 根据待办的具体信息将其状态改为已完成，并自动记录完成时间
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 完成待办请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CompleteTodoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '完成成功" example({"success": true, "message": "待办已完成于 2024-01-15
            14:30"})'
          schema:
            $ref: '#/definitions/handlers.CompleteTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "标题和内容不能为空"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "完成待办失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 完成待办事项
      tags:
      - 待办事项
  /api/todos/completed_todo:
    get:
      description: 查询在指定日期完成的所有待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 查询日期
        example: '"2024-01-15"'
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "date":
            "2024-01-15", "todos": [...], "count": 3})'
          schema:
            $ref: '#/definitions/handlers.CompletedTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "日期参数不能为空"})'
          schema:
            type: string
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询已完成待办失败:
            数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取指定日期完成的待办事项
      tags:
      - 待办查询
  /api/todos/createTodo:
    post:
      consumes:
      - application/json
      description: 创建普通待办或重复待办事项。重复待办会根据规则及ChildDates生成子实例。
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 创建待办请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.CreateTodoRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '创建成功" example({"success": true, "message": "待办创建成功", "created_at":
            "2024-01-15T10:30:00Z"})'
          schema:
            $ref: '#/definitions/services.CreateTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "标题不能为空"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "创建待办失败: 数据库连接错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 创建待办事项
      tags:
      - 待办事项
  /api/todos/get-OneDayExpiredTodos:
    get:
      description: 查询在指定日期过期的所有未完成待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      - description: 查询日期
        example: '"2024-01-15"'
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "date":
            "2024-01-15", "todos": [...], "count": 3})'
          schema:
            type: string
        "400":
          description: '请求参数错误" example({"success": false, "message": "日期参数不能为空"})'
          schema:
            type: string
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询过期待办失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取某一天过期的待办事项
      tags:
      - 待办查询
  /api/todos/todayTodos:
    get:
      description: 查询与今天时间段有交集的所有未完成待办事项
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '查询成功" example({"success": true, "message": "查询成功", "todos":
            [...], "count": 5})'
          schema:
            $ref: '#/definitions/handlers.TodoListResponse'
        "401":
          description: '未授权" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "查询今日待办失败: 数据库错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 获取今日待办事项
      tags:
      - 待办查询
  /api/todos/updateTodos:
    post:
      consumes:
      - application/json
      description: 为有生育能力的过期待办自动创建下一代实例
      parameters:
      - default: Bearer
        description: Bearer Token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '续期成功" example({"success": true, "message": "续期完成: 成功 3, 跳过
            1, 失败 0"})'
          schema:
            $ref: '#/definitions/handlers.RenewTodoResponse'
        "400":
          description: '请求参数错误" example({"success": false, "message": "用户未认证"})'
          schema:
            type: string
        "500":
          description: '系统内部错误" example({"success": false, "message": "续期操作失败: 数据库连接错误"})'
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 续期过期待办
      tags:
      - 待办事项
swagger: "2.0"
